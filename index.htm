<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fractal Viewer</title>
    <link rel="stylesheet" href="style.css">
    <script src="fractals/mandelbrot.js"></script>
    <script src="fractals/julia.js"></script>
    <script src="fractals/burning-ship.js"></script>
    <script src="fractals/koch.js"></script>
    <script src="fractals/sierpinski.js"></script>
    <script src="fractals/dragon.js"></script>
    <script src="fractals/barnsley.js"></script>
    <script src="fractals/menger.js"></script>
    <script src="colors.js"></script>
    <script src="viewer.js"></script>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <div class="menu">
        <h2>Fractal Viewer</h2>
        
        <div class="menu-section">
            <label>Fractal Type</label>
            <select id="fractalType">
                <option value="mandelbrot">Mandelbrot Set</option>
                <option value="burning_ship">Burning Ship</option>
                <option value="julia">Julia Set</option>
                <option value="koch">Koch Snowflake</option>
                <option value="sierpinski">Sierpinski Triangle</option>
                <option value="dragon">Dragon Curve</option>
                <option value="barnsley">Barnsley Fern</option>
                <option value="menger">Menger Sponge</option>
            </select>
        </div>

        <div class="menu-section" id="juliaControls" style="display: none;">
            <label>Julia Set Preset</label>
            <select id="juliaPreset">
                <option value="dendrite">Dendrite (-0.4 + 0.6i)</option>
                <option value="san_marco">San Marco (-0.75 + 0.1i)</option>
                <option value="spiral">Spiral (-0.7269 + 0.1889i)</option>
                <option value="dragon">Dragon (-0.835 - 0.2321i)</option>
                <option value="douady">Douady Rabbit (-0.123 + 0.745i)</option>
                <option value="siegel">Siegel Disk (-0.391 - 0.587i)</option>
                <option value="custom">Custom Parameters</option>
            </select>
            
            <button id="juliaClickBtn" style="width: 100%; margin-top: 10px; background: #9C27B0;">
                Click Mandelbrot to Set Julia
            </button>
        </div>

        <div class="menu-section" id="mandelbrotControls" style="display: none;">
            <button id="mandelbrotClickBtn" style="width: 100%; background: #9C27B0;">
                Click to Pick Julia Parameter
            </button>
            <div id="clickModeIndicator" style="display: none; margin-top: 8px; padding: 8px; background: rgba(156, 39, 176, 0.1); border-radius: 4px; font-size: 11px; color: #9C27B0; text-align: center;">
                Click anywhere on the fractal
            </div>
        </div>

        <div class="menu-section" id="juliaParams" style="display: none;">
            <label>Real Part (c_real)</label>
            <input type="number" id="juliaReal" value="-0.8" step="0.001" min="-2" max="2">
            <label style="margin-top: 8px;">Imaginary Part (c_imag)</label>
            <input type="number" id="juliaImag" value="0.156" step="0.001" min="-2" max="2">
        </div>

        <div class="menu-section">
            <label>Max Iterations</label>
            <input type="number" id="maxIterations" value="100" min="10" max="1000" step="10">
        </div>

        <div class="menu-section">
            <label>Color Scheme</label>
            <select id="colorScheme">
                <option value="default">Default (Polynomial)</option>
                <option value="cosine">Cosine Gradient (Custom)</option>
                <option value="continuous">Continuous (HSL)</option>
                <option value="hsl">HSL Interpolation</option>
                <option value="golden">Golden Ratio</option>
                <option value="cubehelix">Cubehelix</option>
                <option value="grayscale">Grayscale</option>
                <option value="bezier">Bezier RGB</option>
                <option value="complementary">Complementary</option>
                <option value="triadic">Triadic</option>
                <option value="stripe">Stripe Averaging</option>
            </select>
        </div>

        <div class="menu-section" id="cosineControls" style="display: none;">
            <label style="margin-bottom: 10px; display: block;">Base Color</label>
            <div style="display: flex; gap: 8px; align-items: center;">
                <input type="color" id="cosineBaseColor" value="#8080ff" style="flex: 1; height: 35px; border: none; border-radius: 4px; cursor: pointer;">
                <div id="cosineBasePreview" style="width: 35px; height: 35px; border-radius: 4px; background: #8080ff; border: 2px solid #ddd;"></div>
            </div>
            
            <label style="margin-top: 12px; margin-bottom: 10px; display: block;">Accent Color</label>
            <div style="display: flex; gap: 8px; align-items: center;">
                <input type="color" id="cosineAccentColor" value="#ff8080" style="flex: 1; height: 35px; border: none; border-radius: 4px; cursor: pointer;">
                <div id="cosineAccentPreview" style="width: 35px; height: 35px; border-radius: 4px; background: #ff8080; border: 2px solid #ddd;"></div>
            </div>
        </div>

        <div class="menu-section" id="hslControls" style="display: none;">
            <label>Start Hue (0-360°)</label>
            <input type="range" id="hslStartHue" min="0" max="360" value="240" style="width: 100%;">
            <span id="hslStartHueValue" style="font-size: 11px; color: #666;">240°</span>
            
            <label style="margin-top: 8px;">End Hue (0-360°)</label>
            <input type="range" id="hslEndHue" min="0" max="360" value="0" style="width: 100%;">
            <span id="hslEndHueValue" style="font-size: 11px; color: #666;">0°</span>
        </div>

        <div class="menu-section" id="bezierControls" style="display: none;">
            <label style="margin-bottom: 8px; display: block;">Color Points</label>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div>
                    <label style="font-size: 10px; color: #666;">Start</label>
                    <div style="display: flex; gap: 4px;">
                        <input type="color" id="bezierColor0" value="#0a1464" style="flex: 1; height: 30px; border: none; border-radius: 4px; cursor: pointer;">
                        <div id="bezierPreview0" style="width: 30px; height: 30px; border-radius: 4px; background: #0a1464; border: 1px solid #ddd;"></div>
                    </div>
                </div>
                <div>
                    <label style="font-size: 10px; color: #666;">Point 1</label>
                    <div style="display: flex; gap: 4px;">
                        <input type="color" id="bezierColor1" value="#0096c8" style="flex: 1; height: 30px; border: none; border-radius: 4px; cursor: pointer;">
                        <div id="bezierPreview1" style="width: 30px; height: 30px; border-radius: 4px; background: #0096c8; border: 1px solid #ddd;"></div>
                    </div>
                </div>
                <div>
                    <label style="font-size: 10px; color: #666;">Point 2</label>
                    <div style="display: flex; gap: 4px;">
                        <input type="color" id="bezierColor2" value="#ffdc32" style="flex: 1; height: 30px; border: none; border-radius: 4px; cursor: pointer;">
                        <div id="bezierPreview2" style="width: 30px; height: 30px; border-radius: 4px; background: #ffdc32; border: 1px solid #ddd;"></div>
                    </div>
                </div>
                <div>
                    <label style="font-size: 10px; color: #666;">End</label>
                    <div style="display: flex; gap: 4px;">
                        <input type="color" id="bezierColor3" value="#c8320a" style="flex: 1; height: 30px; border: none; border-radius: 4px; cursor: pointer;">
                        <div id="bezierPreview3" style="width: 30px; height: 30px; border-radius: 4px; background: #c8320a; border: 1px solid #ddd;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="menu-section" id="complementaryControls" style="display: none;">
            <label>Base Hue (0-360°)</label>
            <input type="range" id="complementaryHue" min="0" max="360" value="220" style="width: 100%;">
            <span id="complementaryHueValue" style="font-size: 11px; color: #666;">220°</span>
        </div>

        <div class="menu-section" id="triadicControls" style="display: none;">
            <label>Base Hue (0-360°)</label>
            <input type="range" id="triadicHue" min="0" max="360" value="0" style="width: 100%;">
            <span id="triadicHueValue" style="font-size: 11px; color: #666;">0°</span>
        </div>

        <div class="menu-section" id="cubehelixControls" style="display: none;">
            <label>Rotations</label>
            <input type="range" id="cubehelixRotations" min="-3" max="3" step="0.1" value="-1.5" style="width: 100%;">
            <span id="cubehelixRotationsValue" style="font-size: 11px; color: #666;">-1.5</span>
        </div>

        <div class="button-group">
            <button id="resetBtn" class="secondary">Reset View</button>
            <button id="renderBtn">Render</button>
        </div>

        <div class="info">
            Left-click and drag to zoom box<br>
            Right-click and drag to pan<br>
            Scroll to zoom<br>
            Double-click to zoom in
        </div>
    </div>

    <div class="loading" id="loading">
        <div id="loadingText">Rendering...</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">0%</div>
    </div>
</body>
</html>
